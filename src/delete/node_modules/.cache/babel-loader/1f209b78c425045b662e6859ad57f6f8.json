{"ast":null,"code":"import _classCallCheck from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/flatiron/mod5/week2/playtime/src/components/Post.js\";\nimport React from \"react\";\nimport EditPostForm from \"./EditPostForm\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport CommentsContainer from \"../containers/CommentsContainer\";\n\nvar Post =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Post, _React$Component);\n\n  function Post() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Post);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Post)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      markedForDeletion: false,\n      author: \"\"\n    };\n\n    _this.editPostHandler = function (e) {\n      e.preventDefault();\n\n      _this.props.editPostHandler();\n    };\n\n    return _this;\n  }\n\n  _createClass(Post, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// fetch(\"https://welcome-board-backend.herokuapp.com/api/v1/likes\")\n      //   .then(resp => resp.json())\n      //   .then(likes => {\n      //     const postLikes = likes.filter(\n      //       like => like.post_id === this.props.post.id\n      //     ).length;\n      //     this.setState({ likes: postLikes });\n      //   });\n      // const author = this.props.users.find(\n      //   user => user.id === this.props.post.player_id\n      // ).username;\n      // this.setState({\n      //   author\n      // });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"post-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"post-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, this.props.post.user_id === parseInt(localStorage.getItem(\"id\")) || parseInt(localStorage.getItem(\"id\")) === 10 ? React.createElement(\"span\", {\n        className: \"delete pointer\",\n        onClick: this.deleteHandler.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, \"x\") : null, this.props.post.user_id === parseInt(localStorage.getItem(\"id\")) ? React.createElement(EditPostForm, {\n        post: this.props.post,\n        editPostHandler: this.props.editPostHandler,\n        author: this.state.author,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/user/\".concat(this.props.users.find(function (user) {\n          return user.id === _this2.props.post.player_id;\n        }).id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        onClick: this.props.hideEditCover,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.users.find(function (user) {\n          return user.id === _this2.props.post.player_id;\n        }).profile_img,\n        alt: this.props.users.find(function (user) {\n          return user.id === _this2.props.post.player_id;\n        }).username,\n        className: \"profile-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"username\",\n        onClick: this.props.hideEditCoverAndProfilePic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \" Lvl \", this.props.users.find(function (user) {\n        return user.id === _this2.props.post.player_id;\n      }).lvl), React.createElement(Link, {\n        to: \"/user/\".concat(this.props.users.find(function (user) {\n          return user.id === _this2.props.post.player_id;\n        }).id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, this.props.users.find(function (user) {\n        return user.id === _this2.props.post.player_id;\n      }).username, \" \")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.props.post.content)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(CommentsContainer, {\n        comments: this.props.comments,\n        post: this.props.post,\n        addComment: this.props.addComment,\n        currentUser: this.props.currentUser,\n        users: this.props.users,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }))));\n    } // likesHandler() {\n    //   fetch(\"\", {\n    //     method: \"POST\",\n    //     headers: {\n    //       \"Content-Type\": \"application/json\",\n    //       Accept: \"application/json\",\n    //       Authorization: localStorage.getItem(\"token\")\n    //     },\n    //     body: JSON.stringify({\n    //       post_id: this.props.post.id,\n    //       user_id: this.props.currentUser.id\n    //     })\n    //   }).then(this.setState({ likes: this.state.likes + 1 }));\n    // }\n\n  }, {\n    key: \"deleteHandler\",\n    value: function deleteHandler() {\n      // this.setState({ markedForDeletion: true });\n      fetch(\"http://localhost:3000/api/v1/posts/\".concat(this.props.post.id), {\n        method: \"DELETE\",\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        }\n      });\n      this.props.deleteHandler(this.props.post.id);\n    }\n  }]);\n\n  return Post;\n}(React.Component);\n\nexport default withRouter(Post);","map":{"version":3,"sources":["/Users/flatironschool/flatiron/mod5/week2/playtime/src/components/Post.js"],"names":["React","EditPostForm","withRouter","Link","CommentsContainer","Post","state","markedForDeletion","author","editPostHandler","e","preventDefault","props","post","user_id","parseInt","localStorage","getItem","deleteHandler","bind","users","find","user","id","player_id","hideEditCover","profile_img","username","hideEditCoverAndProfilePic","lvl","content","comments","addComment","currentUser","fetch","method","headers","Authorization","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport EditPostForm from \"./EditPostForm\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport CommentsContainer from \"../containers/CommentsContainer\";\n\nclass Post extends React.Component {\n  state = {\n    markedForDeletion: false,\n    author: \"\"\n  };\n\n  componentDidMount() {\n    // fetch(\"https://welcome-board-backend.herokuapp.com/api/v1/likes\")\n    //   .then(resp => resp.json())\n    //   .then(likes => {\n    //     const postLikes = likes.filter(\n    //       like => like.post_id === this.props.post.id\n    //     ).length;\n    //     this.setState({ likes: postLikes });\n    //   });\n    // const author = this.props.users.find(\n    //   user => user.id === this.props.post.player_id\n    // ).username;\n    // this.setState({\n    //   author\n    // });\n  }\n\n  render() {\n    return (\n      <div className=\"post-wrapper\">\n        <div className=\"post-content\">\n          {this.props.post.user_id === parseInt(localStorage.getItem(\"id\")) ||\n          parseInt(localStorage.getItem(\"id\")) === 10 ? (\n            <span\n              className=\"delete pointer\"\n              onClick={this.deleteHandler.bind(this)}\n            >\n              x\n            </span>\n          ) : null}\n\n          {this.props.post.user_id === parseInt(localStorage.getItem(\"id\")) ? (\n            <EditPostForm\n              post={this.props.post}\n              editPostHandler={this.props.editPostHandler}\n              author={this.state.author}\n            />\n          ) : (\n            <React.Fragment>\n              <Link\n                to={`/user/${\n                  this.props.users.find(\n                    user => user.id === this.props.post.player_id\n                  ).id\n                }`}\n              >\n                <span onClick={this.props.hideEditCover}>\n                  <img\n                    src={\n                      this.props.users.find(\n                        user => user.id === this.props.post.player_id\n                      ).profile_img\n                    }\n                    alt={\n                      this.props.users.find(\n                        user => user.id === this.props.post.player_id\n                      ).username\n                    }\n                    className=\"profile-icon\"\n                  />\n                </span>\n              </Link>\n              <div className=\"post\">\n                <p className=\"username\" onClick={this.props.hideEditCoverAndProfilePic}>\n                <span> Lvl {this.props.users.find(\n                        user => user.id === this.props.post.player_id\n                      ).lvl}</span><Link\n                    to={`/user/${\n                      this.props.users.find(\n                        user => user.id === this.props.post.player_id\n                      ).id\n                    }`}\n                  >\n                    {\n                      this.props.users.find(\n                        user => user.id === this.props.post.player_id\n                      ).username\n                    }{\" \"}\n                  </Link>\n                </p>\n                <br />\n                <p>{this.props.post.content}</p>\n              </div>\n              <br />\n              <CommentsContainer\n                comments={this.props.comments}\n                post={this.props.post}\n                addComment={this.props.addComment}\n                currentUser={this.props.currentUser}\n                users={this.props.users}\n              />\n            </React.Fragment>\n          )}\n\n          {/* <div className=\"likes\">\n            <span>{this.state.likes} </span>\n            <span\n              role=\"img\"\n              aria-label=\"emoji\"\n              className={this.props.isUserLoggedIn ? \"pointer\" : \"\"}\n              onClick={\n                this.props.isUserLoggedIn ? this.likesHandler.bind(this) : null\n              }\n            >\n              -\n            </span>\n          </div> */}\n        </div>\n      </div>\n    );\n  }\n\n  // likesHandler() {\n  //   fetch(\"\", {\n  //     method: \"POST\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //       Accept: \"application/json\",\n  //       Authorization: localStorage.getItem(\"token\")\n  //     },\n  //     body: JSON.stringify({\n  //       post_id: this.props.post.id,\n  //       user_id: this.props.currentUser.id\n  //     })\n  //   }).then(this.setState({ likes: this.state.likes + 1 }));\n  // }\n\n  editPostHandler = e => {\n    e.preventDefault();\n    this.props.editPostHandler();\n  };\n\n  deleteHandler() {\n    // this.setState({ markedForDeletion: true });\n    fetch(`http://localhost:3000/api/v1/posts/${this.props.post.id}`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: localStorage.getItem(\"token\")\n      }\n    });\n    this.props.deleteHandler(this.props.post.id);\n  }\n}\n\nexport default withRouter(Post);\n"]},"metadata":{},"sourceType":"module"}