{"ast":null,"code":"import _toConsumableArray from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/flatiron/mod5/week2/playtime/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/flatiron/mod5/week2/playtime/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport NavBar from \"./components/NavBar\";\nimport HomePage from \"./components/HomePage\";\nimport { Route, Switch, withRouter } from \"react-router-dom\";\nimport { bindActionCreators } from \"redux\";\nimport { getUsers } from \"./actions/userActions\";\nimport { connect } from \"react-redux\";\nimport UserShowPage from \"./components/UserShowPage\";\nimport EditProfileForm from \"./components/EditProfileForm\";\nimport LoginForm from \"./components/LoginForm\";\nimport SignUpForm from \"./components/SignUpForm\";\nimport SearchPage from \"./components/SearchPage\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isUserLoggedIn: false,\n      currentUser: {\n        id: 0,\n        first_name: \"\",\n        last_name: \"\",\n        username: \"\",\n        // password: \"\",\n        email: \"\",\n        city: \"\",\n        school: \"\",\n        work: \"\",\n        lvl: 1,\n        exp: 0,\n        exp_limit: 200,\n        energy: 50,\n        max_energy: 50,\n        speed: 1,\n        profile_img: \"https://c1.staticflickr.com/6/5643/23778807571_e9649ee35e_b.jpg\",\n        cover_img: \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Friends_logo.svg/2000px-Friends_logo.svg.png\"\n      },\n      users: [],\n      filteredUsers: [],\n      posts: [],\n      comments: [],\n      activities: [],\n      token: \"\",\n      search: \"\",\n      energyClassName: \"energy-hide\"\n    };\n\n    _this.addActivity = function (activity, username, datetime) {\n      fetch(\"http://localhost:3000/api/v1/activities\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          user_id: _this.state.currentUser.id,\n          task: activity === \"post\" ? \"+60 exp, post to \".concat(username, \" on \").concat(datetime.slice(5, 7), \"/\").concat(datetime.slice(8, 10), \"/\").concat(datetime.slice(2, 4), \" at \").concat(datetime.slice(11, 16), \".\") : \"comment\" ? \"+40 exp, comment to \".concat(username, \" on \").concat(datetime.slice(5, 7), \"/\").concat(datetime.slice(8, 10), \"/\").concat(datetime.slice(2, 4), \" at \").concat(datetime.slice(11, 16), \".\") : \"tag\" ? \"+40 exp, tag \".concat(username, \" on \").concat(datetime.slice(5, 7), \"/\").concat(datetime.slice(8, 10), \"/\").concat(datetime.slice(2, 4), \" at \").concat(datetime.slice(11, 16), \".\") : \"emoji\" ? \"+20 exp, react to \".concat(username, \" on \").concat(datetime.slice(5, 7), \"/\").concat(datetime.slice(8, 10), \"/\").concat(datetime.slice(2, 4), \" at \").concat(datetime.slice(11, 16), \".\") : null\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var newArr = [].concat(_toConsumableArray(_this.state.activities), [data]);\n\n        _this.setState({\n          activities: newArr\n        });\n      }).then(_this.addExp(activity));\n    };\n\n    _this.addExp = function (activity) {\n      fetch(\"http://localhost:3000/api/v1/users/\".concat(_this.state.currentUser.id), {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          exp: _this.state.currentUser.exp = parseInt(_this.state.currentUser.exp) + (activity === \"post\" ? 60 : activity === \"comment\" ? 40 : activity === \"tag\" ? 40 : activity === \"emoji\" ? 20 : 0),\n          energy: _this.state.currentUser.energy -= activity === \"post\" ? 20 : activity === \"comment\" ? 5 : activity === \"tag\" ? 5 : activity === \"emoji\" ? 1 : 0\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var newArr = _toConsumableArray(_this.state.users);\n\n        newArr = newArr.map(function (user) {\n          if (user.id === _this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n\n        _this.setState({\n          users: newArr\n        });\n      }).then(_this.statsHandler());\n    };\n\n    _this.statsHandler = function () {\n      var currentUser = _this.state.currentUser;\n\n      if (currentUser.exp >= currentUser.exp_limit) {\n        _this.levelUp();\n      }\n    };\n\n    _this.levelUp = function () {\n      fetch(\"http://localhost:3000/api/v1/users/\".concat(_this.state.currentUser.id), {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          lvl: _this.state.currentUser.lvl = parseInt(_this.state.currentUser.lvl) + 1,\n          exp: _this.state.currentUser.exp -= _this.state.currentUser.exp_limit,\n          exp_limit: (_this.state.currentUser.exp_limit *= 1.05).Math.round(),\n          max_energy: (_this.state.currentUser.max_energy *= 1.05).Math.round(),\n          energy: (_this.state.currentUser.max_energy *= 1.05).Math.round()\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var newArr = _toConsumableArray(_this.state.users);\n\n        newArr = newArr.map(function (user) {\n          if (user.id === _this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n\n        _this.setState({\n          users: newArr\n        });\n      });\n    };\n\n    _this.changeHandler = function (e) {\n      _this.setState({\n        search: e.target.value\n      });\n    };\n\n    _this.clearSearch = function () {\n      _this.setState({\n        search: \"\"\n      });\n    };\n\n    _this.addPost = function (input, playerId, friendId) {\n      if (_this.state.currentUser.energy >= 20) {\n        fetch(\"http://localhost:3000/api/v1/posts\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            Authorization: localStorage.getItem(\"token\")\n          },\n          body: JSON.stringify({\n            content: input,\n            player_id: playerId,\n            friend_id: friendId\n          })\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          var newArr = _toConsumableArray(_this.state.posts);\n\n          newArr.push(data);\n\n          _this.setState({\n            posts: newArr\n          });\n\n          var username = _this.state.users.find(function (user) {\n            return user.id === friendId;\n          }).username;\n\n          _this.addActivity(\"post\", username, data.created_at);\n        });\n      } else {\n        _this.energyShow();\n      }\n    };\n\n    _this.addComment = function (input, playerId, postId) {\n      if (_this.state.currentUser.energy >= 5) {\n        fetch(\"http://localhost:3000/api/v1/comments\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            Authorization: localStorage.getItem(\"token\")\n          },\n          body: JSON.stringify({\n            comment: input,\n            user_id: playerId,\n            post_id: postId\n          })\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          var newArr = [].concat(_toConsumableArray(_this.state.comments), [data]);\n\n          _this.setState({\n            comments: newArr\n          });\n\n          _this.addActivity(\"comment\", data.user.username, data.created_at);\n        });\n      } else {\n        _this.energyShow();\n      }\n    };\n\n    _this.energyShow = function () {\n      _this.setState({\n        energyClassName: \"energy-show\"\n      });\n    };\n\n    _this.energyHide = function () {\n      _this.setState({\n        energyClassName: \"energy-hide\"\n      });\n    };\n\n    _this.editCover = function (input) {\n      fetch(\"http://localhost:3000/api/v1/users/\".concat(_this.state.currentUser.id), {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          cover_img: input\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var newArr = _toConsumableArray(_this.state.users);\n\n        newArr = newArr.map(function (user) {\n          if (user.id === _this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n\n        _this.setState({\n          users: newArr\n        });\n      });\n    };\n\n    _this.editProfilePic = function (input) {\n      fetch(\"http://localhost:3000/api/v1/users/\".concat(_this.state.currentUser.id), {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          profile_img: input\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var newArr = _toConsumableArray(_this.state.users);\n\n        newArr = newArr.map(function (user) {\n          if (user.id === _this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n\n        _this.setState({\n          users: newArr\n        });\n      });\n    };\n\n    _this.updateHandler = function (currentUser) {\n      _this.setState({\n        currentUser: currentUser\n      });\n\n      fetch(\"http://localhost:3000/api/v1/users/\".concat(currentUser.id), {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: _this.state.token\n        },\n        body: JSON.stringify({\n          username: currentUser.username,\n          password: currentUser.password\n        })\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (user) {\n        _this.setState({\n          currentUser: {\n            id: user.id,\n            username: user.username\n          }\n        });\n\n        _this.props.history.push(\"/home\");\n      });\n    };\n\n    _this.submitSignUpHandler = function (userInfo, event) {\n      event.preventDefault();\n\n      _this.createUser(userInfo);\n\n      _this.props.history.push(\"/home\");\n    };\n\n    _this.createUser = function (userInfo) {\n      fetch(\"http://localhost:3000/api/v1/users\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          username: userInfo.username,\n          password: userInfo.password,\n          first_name: userInfo.first_name,\n          last_name: userInfo.last_name,\n          lvl: 1,\n          exp: 0,\n          exp_limit: 200,\n          energy: 50,\n          max_energy: 50,\n          speed: 1\n        })\n      }).then(function (res) {\n        if (res.status === 406) throw new Error(res.status);else return res.json();\n      }).then(function (res) {\n        localStorage.setItem(\"token\", res.jwt);\n        localStorage.setItem(\"id\", res.user.id);\n        localStorage.setItem(\"username\", res.user.username); //come back\n\n        _this.setState({\n          isUserLoggedIn: true,\n          token: localStorage.getItem(\"token\"),\n          currentUser: {\n            id: res.user.id,\n            username: res.user.username,\n            first_name: res.user.first_name,\n            last_name: res.user.last_name,\n            lvl: 1,\n            exp: 0,\n            exp_limit: 200,\n            energy: 50,\n            max_energy: 50,\n            speed: 1,\n            password: \"\"\n          }\n        });\n      }).catch(function (error) {\n        localStorage.setItem(\"signupError\", \"Duplicate account\");\n\n        _this.props.history.push(\"/signup\");\n      });\n    };\n\n    _this.submitLoginHandler = function (userInfo, event) {\n      event.preventDefault();\n\n      _this.getUser(userInfo);\n\n      _this.props.history.push(\"/home\");\n    };\n\n    _this.getUser = function (userInfo) {\n      fetch(\"http://localhost:3000/api/v1/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          username: userInfo.loginUsername,\n          password: userInfo.loginPassword\n        })\n      }).then(function (res) {\n        if (res.status === 401) throw new Error(res.status);else return res.json();\n      }) // .then(res => res.json())\n      .then(function (res) {\n        localStorage.setItem(\"token\", res.jwt);\n        localStorage.setItem(\"id\", res.user.id);\n        localStorage.setItem(\"username\", res.user.username);\n        localStorage.setItem(\"first_name\", res.user.first_name);\n        localStorage.setItem(\"last_name\", res.user.last_name);\n        localStorage.setItem(\"email\", res.user.email);\n        localStorage.setItem(\"city\", res.user.city);\n        localStorage.setItem(\"school\", res.user.school);\n        localStorage.setItem(\"work\", res.user.work);\n        localStorage.setItem(\"lvl\", res.user.lvl);\n        localStorage.setItem(\"exp\", res.user.exp);\n        localStorage.setItem(\"exp_limit\", res.user.exp_limit);\n        localStorage.setItem(\"energy\", res.user.energy);\n        localStorage.setItem(\"max_energy\", res.user.max_energy);\n        localStorage.setItem(\"speed\", res.user.speed);\n        localStorage.setItem(\"profile_img\", res.user.profile_img);\n        localStorage.setItem(\"cover_img\", res.user.cover_img);\n\n        _this.setState({\n          isUserLoggedIn: true,\n          token: localStorage.getItem(\"token\"),\n          currentUser: {\n            id: res.user.id,\n            username: res.user.username,\n            first_name: res.user.first_name,\n            last_name: res.user.last_name,\n            email: res.user.email,\n            password: \"\",\n            city: res.user.city,\n            school: res.user.school,\n            work: res.user.work,\n            lvl: res.user.lvl,\n            exp: res.user.exp,\n            exp_limit: res.user.exp_limit,\n            energy: res.user.energy,\n            max_energy: res.user.max_energy,\n            speed: res.user.speed,\n            profile_img: res.user.profile_img,\n            cover_img: res.user.cover_img\n          }\n        });\n      }).catch(function (error) {\n        localStorage.setItem(\"loginError\", \"Invalid account/password\");\n\n        _this.props.history.push(\"/login\"); // this.setState({ alert_error: true });\n        // alert(`HTTP ERROR: ${error}, Unknown account or password!`);\n\n      });\n    };\n\n    _this.logout = function () {\n      //need to remove local storage token\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"id\");\n      localStorage.removeItem(\"username\");\n\n      _this.setState({\n        currentUser: {\n          id: 0,\n          username: \"\"\n        },\n        isUserLoggedIn: false,\n        token: \"\"\n      });\n\n      _this.props.history.push(\"/home\");\n    };\n\n    _this.deleteHandler = function (id) {\n      var posts = _toConsumableArray(_this.state.posts).filter(function (post) {\n        return post.id !== id;\n      });\n\n      _this.setState({\n        posts: posts\n      });\n    };\n\n    _this.editPostHandler = function (id, content) {\n      fetch(\"http://localhost:3000/api/v1/posts/\".concat(id), {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: _this.state.token\n        },\n        body: JSON.stringify({\n          content: content\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var newArr = _toConsumableArray(_this.state.posts);\n\n        newArr = newArr.map(function (post) {\n          if (post.id === id) {\n            return data;\n          } else {\n            return post;\n          }\n        });\n\n        _this.setState({\n          posts: newArr\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // this.props.getUsers();\n      fetch(\"http://localhost:3000/api/v1/users\").then(function (resp) {\n        return resp.json();\n      }).then(function (users) {\n        _this2.setState({\n          users: users,\n          filteredUsers: users\n        });\n      });\n      fetch(\"http://localhost:3000/api/v1/posts\").then(function (resp) {\n        return resp.json();\n      }).then(function (posts) {\n        _this2.setState({\n          posts: posts\n        });\n      });\n      fetch(\"http://localhost:3000/api/v1/comments\").then(function (resp) {\n        return resp.json();\n      }).then(function (comments) {\n        _this2.setState({\n          comments: comments\n        });\n      });\n      fetch(\"http://localhost:3000/api/v1/activities\").then(function (resp) {\n        return resp.json();\n      }).then(function (activities) {\n        _this2.setState({\n          activities: activities\n        });\n      });\n\n      if (localStorage.getItem(\"token\") !== null) {\n        this.setState({\n          currentUser: {\n            id: parseInt(localStorage.getItem(\"id\")),\n            username: localStorage.getItem(\"username\"),\n            first_name: localStorage.getItem(\"first_name\"),\n            last_name: localStorage.getItem(\"last_name\"),\n            email: localStorage.getItem(\"email\"),\n            city: localStorage.getItem(\"city\"),\n            school: localStorage.getItem(\"school\"),\n            work: localStorage.getItem(\"work\"),\n            lvl: localStorage.getItem(\"lvl\"),\n            exp: localStorage.getItem(\"exp\"),\n            exp_limit: localStorage.getItem(\"exp_limit\"),\n            energy: localStorage.getItem(\"energy\"),\n            max_energy: localStorage.getItem(\"max_energy\"),\n            speed: localStorage.getItem(\"speed\"),\n            profile_img: localStorage.getItem(\"profile_img\"),\n            cover_img: localStorage.getItem(\"cover_img\")\n          },\n          token: localStorage.getItem(\"token\"),\n          isUserLoggedIn: true\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      fetch(\"http://localhost:3000/api/v1/users\").then(function (resp) {\n        return resp.json();\n      }).then(function (users) {\n        localStorage.setItem(\"users\", JSON.stringify(users));\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      localStorage.clear();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        isUserLoggedIn: this.state.isUserLoggedIn,\n        logout: this.logout,\n        currentPath: this.props.location.pathname,\n        search: this.state.search,\n        changeHandler: this.changeHandler,\n        currentUser: this.state.currentUser,\n        clearSearch: this.clearSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }), this.state.search === \"\" ? React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/home\",\n        render: function render(RouterProps) {\n          return _this3.state.isUserLoggedIn ? React.createElement(UserShowPage, {\n            user_id: _this3.state.currentUser.id,\n            posts: _this3.state.posts,\n            addPost: _this3.addPost,\n            addComment: _this3.addComment,\n            isUserLoggedIn: _this3.state.isUserLoggedIn,\n            currentUser: _this3.state.currentUser,\n            deleteHandler: _this3.deleteHandler,\n            editPostHandler: _this3.editPostHandler,\n            comments: _this3.state.comments,\n            users: JSON.parse(localStorage.getItem(\"users\")),\n            editCover: _this3.editCover,\n            editProfilePic: _this3.editProfilePic,\n            activities: _this3.state.activities,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 284\n            },\n            __self: this\n          }) : React.createElement(HomePage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 300\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/user/:id\",\n        render: function render(RouterProps) {\n          return React.createElement(UserShowPage, {\n            user_id: parseInt(RouterProps.match.params.id),\n            posts: _this3.state.posts,\n            addPost: _this3.addPost,\n            addComment: _this3.addComment,\n            isUserLoggedIn: _this3.state.isUserLoggedIn,\n            currentUser: _this3.state.currentUser,\n            deleteHandler: _this3.deleteHandler,\n            editPostHandler: _this3.editPostHandler,\n            comments: _this3.state.comments,\n            users: JSON.parse(localStorage.getItem(\"users\")),\n            editCover: _this3.editCover,\n            editProfilePic: _this3.editProfilePic,\n            activities: _this3.state.activities,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 308\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/search\",\n        render: function render() {\n          return React.createElement(SearchPage, {\n            clearSearch: _this3.clearSearch,\n            isUserLoggedIn: _this3.state.isUserLoggedIn,\n            search: _this3.state.search,\n            filteredUsers: _this3.state.filteredUsers,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 330\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/editProfile\",\n        render: function render() {\n          return React.createElement(EditProfileForm, {\n            isUserLoggedIn: _this3.state.isUserLoggedIn,\n            currentUser: _this3.state.currentUser,\n            updateHandler: _this3.updateHandler,\n            mods: _this3.state.mods,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 343\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render() {\n          return React.createElement(LoginForm, {\n            submitLoginHandler: _this3.submitLoginHandler,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 356\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/signUp\",\n        render: function render() {\n          return React.createElement(SignUpForm, {\n            submitSignUpHandler: _this3.submitSignUpHandler,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 364\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/\",\n        component: HomePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      })) : React.createElement(SearchPage, {\n        clearSearch: this.clearSearch,\n        isUserLoggedIn: this.state.isUserLoggedIn,\n        search: this.state.search,\n        filteredUsers: this.props.filteredUsers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: this.state.energyClassName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, \"Not enough energy at the moment.\"), React.createElement(\"span\", {\n        onClick: this.energyHide,\n        className: \"close pointer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"x\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getUsers: bindActionCreators(getUsers, dispatch)\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));","map":{"version":3,"sources":["/Users/flatironschool/flatiron/mod5/week2/playtime/src/App.js"],"names":["React","Component","NavBar","HomePage","Route","Switch","withRouter","bindActionCreators","getUsers","connect","UserShowPage","EditProfileForm","LoginForm","SignUpForm","SearchPage","App","state","isUserLoggedIn","currentUser","id","first_name","last_name","username","email","city","school","work","lvl","exp","exp_limit","energy","max_energy","speed","profile_img","cover_img","users","filteredUsers","posts","comments","activities","token","search","energyClassName","addActivity","activity","datetime","fetch","method","headers","Accept","Authorization","localStorage","getItem","body","JSON","stringify","user_id","task","slice","then","res","json","data","newArr","setState","addExp","parseInt","map","user","statsHandler","levelUp","Math","round","changeHandler","e","target","value","clearSearch","addPost","input","playerId","friendId","content","player_id","friend_id","push","find","created_at","energyShow","addComment","postId","comment","post_id","energyHide","editCover","editProfilePic","updateHandler","password","resp","props","history","submitSignUpHandler","userInfo","event","preventDefault","createUser","status","Error","setItem","jwt","catch","error","submitLoginHandler","getUser","loginUsername","loginPassword","logout","removeItem","deleteHandler","filter","post","editPostHandler","prevProps","prevState","clear","location","pathname","RouterProps","parse","match","params","mods","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport NavBar from \"./components/NavBar\";\nimport HomePage from \"./components/HomePage\";\nimport { Route, Switch, withRouter } from \"react-router-dom\";\nimport { bindActionCreators } from \"redux\";\nimport { getUsers } from \"./actions/userActions\";\nimport { connect } from \"react-redux\";\nimport UserShowPage from \"./components/UserShowPage\";\nimport EditProfileForm from \"./components/EditProfileForm\";\nimport LoginForm from \"./components/LoginForm\";\nimport SignUpForm from \"./components/SignUpForm\";\nimport SearchPage from \"./components/SearchPage\";\n\nclass App extends Component {\n  state = {\n    isUserLoggedIn: false,\n    currentUser: {\n      id: 0,\n      first_name: \"\",\n      last_name: \"\",\n      username: \"\",\n      // password: \"\",\n      email: \"\",\n      city: \"\",\n      school: \"\",\n      work: \"\",\n      lvl: 1,\n      exp: 0,\n      exp_limit: 200,\n      energy: 50,\n      max_energy: 50,\n      speed: 1,\n      profile_img:\n        \"https://c1.staticflickr.com/6/5643/23778807571_e9649ee35e_b.jpg\",\n      cover_img:\n        \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Friends_logo.svg/2000px-Friends_logo.svg.png\"\n    },\n    users: [],\n    filteredUsers: [],\n    posts: [],\n    comments: [],\n    activities: [],\n    token: \"\",\n    search: \"\",\n    energyClassName: \"energy-hide\"\n  };\n\n  componentDidMount() {\n    // this.props.getUsers();\n\n    fetch(\"http://localhost:3000/api/v1/users\")\n      .then(resp => resp.json())\n      .then(users => {\n        this.setState({ users, filteredUsers: users });\n      });\n\n    fetch(\"http://localhost:3000/api/v1/posts\")\n      .then(resp => resp.json())\n      .then(posts => {\n        this.setState({ posts });\n      });\n\n    fetch(\"http://localhost:3000/api/v1/comments\")\n      .then(resp => resp.json())\n      .then(comments => {\n        this.setState({ comments });\n      });\n\n    fetch(\"http://localhost:3000/api/v1/activities\")\n      .then(resp => resp.json())\n      .then(activities => {\n        this.setState({ activities });\n      });\n\n    if (localStorage.getItem(\"token\") !== null) {\n      this.setState({\n        currentUser: {\n          id: parseInt(localStorage.getItem(\"id\")),\n          username: localStorage.getItem(\"username\"),\n          first_name: localStorage.getItem(\"first_name\"),\n          last_name: localStorage.getItem(\"last_name\"),\n          email: localStorage.getItem(\"email\"),\n          city: localStorage.getItem(\"city\"),\n          school: localStorage.getItem(\"school\"),\n          work: localStorage.getItem(\"work\"),\n          lvl: localStorage.getItem(\"lvl\"),\n          exp: localStorage.getItem(\"exp\"),\n          exp_limit: localStorage.getItem(\"exp_limit\"),\n          energy: localStorage.getItem(\"energy\"),\n          max_energy: localStorage.getItem(\"max_energy\"),\n          speed: localStorage.getItem(\"speed\"),\n          profile_img: localStorage.getItem(\"profile_img\"),\n          cover_img: localStorage.getItem(\"cover_img\")\n        },\n        token: localStorage.getItem(\"token\"),\n        isUserLoggedIn: true\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    fetch(\"http://localhost:3000/api/v1/users\")\n      .then(resp => resp.json())\n      .then(users => {\n        localStorage.setItem(\"users\", JSON.stringify(users));\n      });\n  }\n\n  componentWillUnmount() {\n    localStorage.clear();\n  }\n\n  addActivity = (activity, username, datetime) => {\n    fetch(`http://localhost:3000/api/v1/activities`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        user_id: this.state.currentUser.id,\n        task:\n          activity === \"post\"\n            ? `+60 exp, post to ${username} on ${datetime.slice(\n                5,\n                7\n              )}/${datetime.slice(8, 10)}/${datetime.slice(\n                2,\n                4\n              )} at ${datetime.slice(11, 16)}.`\n            : \"comment\"\n            ? `+40 exp, comment to ${username} on ${datetime.slice(\n                5,\n                7\n              )}/${datetime.slice(8, 10)}/${datetime.slice(\n                2,\n                4\n              )} at ${datetime.slice(11, 16)}.`\n            : \"tag\"\n            ? `+40 exp, tag ${username} on ${datetime.slice(\n                5,\n                7\n              )}/${datetime.slice(8, 10)}/${datetime.slice(\n                2,\n                4\n              )} at ${datetime.slice(11, 16)}.`\n            : \"emoji\"\n            ? `+20 exp, react to ${username} on ${datetime.slice(\n                5,\n                7\n              )}/${datetime.slice(8, 10)}/${datetime.slice(\n                2,\n                4\n              )} at ${datetime.slice(11, 16)}.`\n            : null\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        let newArr = [...this.state.activities, data];\n        this.setState({ activities: newArr });\n      })\n      .then(this.addExp(activity));\n  };\n\n  addExp = activity => {\n    fetch(`http://localhost:3000/api/v1/users/${this.state.currentUser.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        exp: (this.state.currentUser.exp =\n          parseInt(this.state.currentUser.exp) +\n          (activity === \"post\"\n            ? 60\n            : activity === \"comment\"\n            ? 40\n            : activity === \"tag\"\n            ? 40\n            : activity === \"emoji\"\n            ? 20\n            : 0)),\n        energy: (this.state.currentUser.energy -=\n          activity === \"post\"\n            ? 20\n            : activity === \"comment\"\n            ? 5\n            : activity === \"tag\"\n            ? 5\n            : activity === \"emoji\"\n            ? 1\n            : 0)\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        let newArr = [...this.state.users];\n        newArr = newArr.map(user => {\n          if (user.id === this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n        this.setState({ users: newArr });\n      })\n      .then(this.statsHandler());\n  };\n\n  statsHandler = () => {\n    let currentUser = this.state.currentUser;\n    if (currentUser.exp >= currentUser.exp_limit) {\n      this.levelUp();\n    }\n  };\n\n  levelUp = () => {\n    fetch(`http://localhost:3000/api/v1/users/${this.state.currentUser.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        lvl: (this.state.currentUser.lvl =\n          parseInt(this.state.currentUser.lvl) + 1),\n        exp: (this.state.currentUser.exp -= this.state.currentUser.exp_limit),\n        exp_limit: (this.state.currentUser.exp_limit *= 1.05).Math.round(),\n        max_energy: (this.state.currentUser.max_energy *= 1.05).Math.round(),\n        energy: (this.state.currentUser.max_energy *= 1.05).Math.round()\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        let newArr = [...this.state.users];\n        newArr = newArr.map(user => {\n          if (user.id === this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n        this.setState({ users: newArr });\n      });\n  };\n\n  changeHandler = e => {\n    this.setState({\n      search: e.target.value\n    });\n  };\n\n  clearSearch = () => {\n    this.setState({\n      search: \"\"\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <NavBar\n          isUserLoggedIn={this.state.isUserLoggedIn}\n          logout={this.logout}\n          currentPath={this.props.location.pathname}\n          search={this.state.search}\n          changeHandler={this.changeHandler}\n          currentUser={this.state.currentUser}\n          clearSearch={this.clearSearch}\n        />\n\n        {this.state.search === \"\" ? (\n          <Switch>\n            <Route\n              path=\"/home\"\n              render={RouterProps => {\n                return this.state.isUserLoggedIn ? (\n                  <UserShowPage\n                    user_id={this.state.currentUser.id}\n                    posts={this.state.posts}\n                    addPost={this.addPost}\n                    addComment={this.addComment}\n                    isUserLoggedIn={this.state.isUserLoggedIn}\n                    currentUser={this.state.currentUser}\n                    deleteHandler={this.deleteHandler}\n                    editPostHandler={this.editPostHandler}\n                    comments={this.state.comments}\n                    users={JSON.parse(localStorage.getItem(\"users\"))}\n                    editCover={this.editCover}\n                    editProfilePic={this.editProfilePic}\n                    activities={this.state.activities}\n                  />\n                ) : (\n                  <HomePage />\n                );\n              }}\n            />\n            <Route\n              path=\"/user/:id\"\n              render={RouterProps => {\n                return (\n                  <UserShowPage\n                    user_id={parseInt(RouterProps.match.params.id)}\n                    posts={this.state.posts}\n                    addPost={this.addPost}\n                    addComment={this.addComment}\n                    isUserLoggedIn={this.state.isUserLoggedIn}\n                    currentUser={this.state.currentUser}\n                    deleteHandler={this.deleteHandler}\n                    editPostHandler={this.editPostHandler}\n                    comments={this.state.comments}\n                    users={JSON.parse(localStorage.getItem(\"users\"))}\n                    editCover={this.editCover}\n                    editProfilePic={this.editProfilePic}\n                    activities={this.state.activities}\n                  />\n                );\n              }}\n            />\n            <Route\n              path=\"/search\"\n              render={() => {\n                return (\n                  <SearchPage\n                    clearSearch={this.clearSearch}\n                    isUserLoggedIn={this.state.isUserLoggedIn}\n                    search={this.state.search}\n                    filteredUsers={this.state.filteredUsers}\n                  />\n                );\n              }}\n            />\n            <Route\n              path=\"/editProfile\"\n              render={() => {\n                return (\n                  <EditProfileForm\n                    isUserLoggedIn={this.state.isUserLoggedIn}\n                    currentUser={this.state.currentUser}\n                    updateHandler={this.updateHandler}\n                    mods={this.state.mods}\n                  />\n                );\n              }}\n            />\n            <Route\n              path=\"/login\"\n              render={() => {\n                return (\n                  <LoginForm submitLoginHandler={this.submitLoginHandler} />\n                );\n              }}\n            />\n            <Route\n              path=\"/signUp\"\n              render={() => {\n                return (\n                  <SignUpForm submitSignUpHandler={this.submitSignUpHandler} />\n                );\n              }}\n            />\n            <Route path=\"/\" component={HomePage} />\n          </Switch>\n        ) : (\n          <SearchPage\n            clearSearch={this.clearSearch}\n            isUserLoggedIn={this.state.isUserLoggedIn}\n            search={this.state.search}\n            filteredUsers={this.props.filteredUsers}\n          />\n        )}\n        <div className={this.state.energyClassName}>\n          <p className=\"red\">Not enough energy at the moment.</p>\n          <span onClick={this.energyHide} className=\"close pointer\">\n            x\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  addPost = (input, playerId, friendId) => {\n    if (this.state.currentUser.energy >= 20) {\n      fetch(\"http://localhost:3000/api/v1/posts\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          content: input,\n          player_id: playerId,\n          friend_id: friendId\n        })\n      })\n        .then(res => res.json())\n        .then(data => {\n          let newArr = [...this.state.posts];\n          newArr.push(data);\n          this.setState({ posts: newArr });\n          let username = this.state.users.find(user => {\n            return user.id === friendId;\n          }).username;\n          this.addActivity(\"post\", username, data.created_at);\n        });\n    } else {\n      this.energyShow();\n    }\n  };\n\n  addComment = (input, playerId, postId) => {\n    if (this.state.currentUser.energy >= 5) {\n      fetch(\"http://localhost:3000/api/v1/comments\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          comment: input,\n          user_id: playerId,\n          post_id: postId\n        })\n      })\n        .then(res => res.json())\n        .then(data => {\n          let newArr = [...this.state.comments, data];\n          this.setState({ comments: newArr });\n          this.addActivity(\"comment\", data.user.username, data.created_at);\n        });\n    } else {\n      this.energyShow();\n    }\n  };\n\n  energyShow = () => {\n    this.setState({ energyClassName: \"energy-show\" });\n  };\n\n  energyHide = () => {\n    this.setState({ energyClassName: \"energy-hide\" });\n  };\n\n  editCover = input => {\n    fetch(`http://localhost:3000/api/v1/users/${this.state.currentUser.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        cover_img: input\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        let newArr = [...this.state.users];\n        newArr = newArr.map(user => {\n          if (user.id === this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n        this.setState({ users: newArr });\n      });\n  };\n\n  editProfilePic = input => {\n    fetch(`http://localhost:3000/api/v1/users/${this.state.currentUser.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        profile_img: input\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        let newArr = [...this.state.users];\n        newArr = newArr.map(user => {\n          if (user.id === this.state.currentUser.id) {\n            return data;\n          } else {\n            return user;\n          }\n        });\n        this.setState({ users: newArr });\n      });\n  };\n\n  updateHandler = currentUser => {\n    this.setState({ currentUser });\n\n    fetch(`http://localhost:3000/api/v1/users/${currentUser.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: this.state.token\n      },\n      body: JSON.stringify({\n        username: currentUser.username,\n        password: currentUser.password\n      })\n    })\n      .then(resp => resp.json())\n      .then(user => {\n        this.setState({\n          currentUser: {\n            id: user.id,\n            username: user.username\n          }\n        });\n        this.props.history.push(\"/home\");\n      });\n  };\n\n  submitSignUpHandler = (userInfo, event) => {\n    event.preventDefault();\n    this.createUser(userInfo);\n    this.props.history.push(\"/home\");\n  };\n\n  createUser = userInfo => {\n    fetch(\"http://localhost:3000/api/v1/users\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        username: userInfo.username,\n        password: userInfo.password,\n        first_name: userInfo.first_name,\n        last_name: userInfo.last_name,\n        lvl: 1,\n        exp: 0,\n        exp_limit: 200,\n        energy: 50,\n        max_energy: 50,\n        speed: 1\n      })\n    })\n      .then(res => {\n        if (res.status === 406) throw new Error(res.status);\n        else return res.json();\n      })\n      .then(res => {\n        localStorage.setItem(\"token\", res.jwt);\n        localStorage.setItem(\"id\", res.user.id);\n        localStorage.setItem(\"username\", res.user.username);\n        //come back\n        this.setState({\n          isUserLoggedIn: true,\n          token: localStorage.getItem(\"token\"),\n          currentUser: {\n            id: res.user.id,\n            username: res.user.username,\n            first_name: res.user.first_name,\n            last_name: res.user.last_name,\n            lvl: 1,\n            exp: 0,\n            exp_limit: 200,\n            energy: 50,\n            max_energy: 50,\n            speed: 1,\n            password: \"\"\n          }\n        });\n      })\n      .catch(error => {\n        localStorage.setItem(\"signupError\", \"Duplicate account\");\n        this.props.history.push(\"/signup\");\n      });\n  };\n\n  submitLoginHandler = (userInfo, event) => {\n    event.preventDefault();\n    this.getUser(userInfo);\n    this.props.history.push(\"/home\");\n  };\n\n  getUser = userInfo => {\n    fetch(\"http://localhost:3000/api/v1/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        username: userInfo.loginUsername,\n        password: userInfo.loginPassword\n      })\n    })\n      .then(res => {\n        if (res.status === 401) throw new Error(res.status);\n        else return res.json();\n      })\n      // .then(res => res.json())\n      .then(res => {\n        localStorage.setItem(\"token\", res.jwt);\n        localStorage.setItem(\"id\", res.user.id);\n        localStorage.setItem(\"username\", res.user.username);\n        localStorage.setItem(\"first_name\", res.user.first_name);\n        localStorage.setItem(\"last_name\", res.user.last_name);\n        localStorage.setItem(\"email\", res.user.email);\n        localStorage.setItem(\"city\", res.user.city);\n        localStorage.setItem(\"school\", res.user.school);\n        localStorage.setItem(\"work\", res.user.work);\n        localStorage.setItem(\"lvl\", res.user.lvl);\n        localStorage.setItem(\"exp\", res.user.exp);\n        localStorage.setItem(\"exp_limit\", res.user.exp_limit);\n        localStorage.setItem(\"energy\", res.user.energy);\n        localStorage.setItem(\"max_energy\", res.user.max_energy);\n        localStorage.setItem(\"speed\", res.user.speed);\n        localStorage.setItem(\"profile_img\", res.user.profile_img);\n        localStorage.setItem(\"cover_img\", res.user.cover_img);\n\n        this.setState({\n          isUserLoggedIn: true,\n          token: localStorage.getItem(\"token\"),\n          currentUser: {\n            id: res.user.id,\n            username: res.user.username,\n            first_name: res.user.first_name,\n            last_name: res.user.last_name,\n            email: res.user.email,\n            password: \"\",\n            city: res.user.city,\n            school: res.user.school,\n            work: res.user.work,\n            lvl: res.user.lvl,\n            exp: res.user.exp,\n            exp_limit: res.user.exp_limit,\n            energy: res.user.energy,\n            max_energy: res.user.max_energy,\n            speed: res.user.speed,\n            profile_img: res.user.profile_img,\n            cover_img: res.user.cover_img\n          }\n        });\n      })\n      .catch(error => {\n        localStorage.setItem(\"loginError\", \"Invalid account/password\");\n        this.props.history.push(\"/login\");\n        // this.setState({ alert_error: true });\n        // alert(`HTTP ERROR: ${error}, Unknown account or password!`);\n      });\n  };\n\n  logout = () => {\n    //need to remove local storage token\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"id\");\n    localStorage.removeItem(\"username\");\n\n    this.setState({\n      currentUser: {\n        id: 0,\n        username: \"\"\n      },\n      isUserLoggedIn: false,\n      token: \"\"\n    });\n\n    this.props.history.push(\"/home\");\n  };\n\n  deleteHandler = id => {\n    const posts = [...this.state.posts].filter(post => post.id !== id);\n    this.setState({ posts });\n  };\n\n  editPostHandler = (id, content) => {\n    fetch(`http://localhost:3000/api/v1/posts/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: this.state.token\n      },\n      body: JSON.stringify({\n        content\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        let newArr = [...this.state.posts];\n        newArr = newArr.map(post => {\n          if (post.id === id) {\n            return data;\n          } else {\n            return post;\n          }\n        });\n        this.setState({ posts: newArr });\n      });\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getUsers: bindActionCreators(getUsers, dispatch)\n  };\n}\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(App)\n);\n"]},"metadata":{},"sourceType":"module"}